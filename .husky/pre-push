#!/usr/bin/env bash
set -euo pipefail

if [[ "${SKIP_PREPUSH:-}" == "1" ]]; then
	echo "[pre-push] Skipped via SKIP_PREPUSH=1"
	exit 0
fi

echo "[pre-push] Node $(node -v)"
echo "[1/1] Prettier format check (scoped)" 
npx prettier --check "server/**/*.ts" "client/src/**/*.tsx" "tests/**/*.ts" || {
	echo "[pre-push] Formatting issues found. Run: npm run format"; exit 1; }
echo "[pre-push] Prettier OK. (TypeScript check removed)"

